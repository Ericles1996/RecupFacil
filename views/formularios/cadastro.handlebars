<br>
<div class="login-container">
    <h2>Cadastro de Usuário</h2>
    <form action="/cadastro" method="POST">
        <div class="form-group">
            <label for="username">Nome Completo: <span style="color: red;">*</span></label>
            <input type="text" id="username" name="username" required>
        </div>

        <div class="form-group">
            <label for="cpf">CPF: <span style="color: red;">*</span></label>
            <input type="text" id="cpf" name="cpf" required inputmode="numeric" pattern="[0-9]{11}" maxlength="11" oninput="onlyDigits(this)">
        </div>

        <div class="form-group">
            <label for="email">E-mail: <span style="color: red;">*</span></label>
            <input id="email" name="email" type="email" class="form-control" required aria-describedby="emailHelp" />
            <div id="emailError" class="invalid-feedback" style="display:none;">Por favor, informe um e-mail vÃ¡lido.</div>
        </div>

        <div class="form-group">
            <label for="password">Senha: <span style="color: red;">*</span></label>
            <div class="password-wrapper">
                <input type="password" id="password" name="password" placeholder="Digite sua senha" required>
                <button type="button" id="togglePassword" class="toggle-visibility">Mostrar</button>
            </div>
        </div>

        <div class="form-group">
            <label for="confirm_password">Confirme a Senha: <span style="color: red;">*</span></label>
            <div class="password-wrapper">
                <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirme sua senha" required>
                <button type="button" id="toggleConfirmPassword" class="toggle-visibility">Mostrar</button>
            </div>
        </div>

        <div class="form-group">
            <label for="gender">Sexo: <span style="color: red;">*</span></label>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>Selecione</option>
                <option value="masculino">Masculino</option>
                <option value="feminino">Feminino</option>
                <option value="outro">Outro</option>
            </select>
        </div>

        <div class="form-group">
            <label for="birthdate_display">Data de Nascimento: <span style="color: red;">*</span></label>
            <input
              type="text"
              id="birthdate_display"
              name="birthdate_display"
              inputmode="numeric"
              pattern="\d{2}/\d{2}/\d{4}"
              maxlength="10"
              placeholder="DD/MM/AAAA"
              required
            >
            <input type="hidden" id="birthdate" name="birthdate">
        </div>

        <!-- Campos de Telefone -->
        <div class="form-group contact-field">
            <label for="phone1">Contato 1: <span style="color: red;">*</span></label>
            <div class="field-inline">
                <input type="text" id="phone1" name="phone1" inputmode="tel" pattern="[0-9]{10,11}" maxlength="11" oninput="onlyDigits(this)">
                <select id="phone1_type" name="phone1_type" required>
                    <option value="" disabled selected>Tipo </option>
                    <option value="celular">Celular</option>
                    <option value="telefone">Telefone</option>
                </select>
            </div>
        </div>

        <div class="form-group contact-field">
            <label for="phone2">Contato 2:</label>
            <div class="field-inline">
                <input type="text" id="phone2" name="phone2" inputmode="tel" pattern="[0-9]{10,11}" maxlength="11" oninput="onlyDigits(this)">
                <select id="phone2_type" name="phone2_type">
                    <option value="" disabled selected>Tipo </option>
                    <option value="celular">Celular</option>
                    <option value="telefone">Telefone</option>
                </select>
            </div>
        </div>

                <!-- Campos de Endere��o -->
        <div class="form-section">
            <h3>Endereço</h3>
            <div class="address-grid">
                <div class="form-group address-col address-uf">
                    <label for="state">Estado: <span style="color: red;">*</span></label>
                    <input type="text" id="state" name="state" required maxlength="2">
                </div>
                <div class="form-group address-col">
                    <label for="city">Cidade: <span style="color: red;">*</span></label>
                    <input type="text" id="city" name="city" required>
                </div>
                <div class="form-group address-col">
                    <label for="neighborhood">Bairro: <span style="color: red;">*</span></label>
                    <input type="text" id="neighborhood" name="neighborhood" required>
                </div>
                <div class="form-group address-col address-span-2">
                    <label for="street">Rua: <span style="color: red;">*</span></label>
                    <input type="text" id="street" name="street" required>
                </div>
                <div class="form-group address-col address-compact">
                    <label for="number">Número: <span style="color: red;">*</span></label>
                    <input type="text" id="number" name="number" required inputmode="numeric" pattern="[0-9]+" oninput="onlyDigits(this)">
                </div>
                <div class="form-group address-col address-compact">
                    <label for="cep">CEP: <span style="color: red;">*</span></label>
                    <input type="text" id="cep" name="cep" required inputmode="numeric" pattern="[0-9]{8}" maxlength="8" oninput="onlyDigits(this)">
                </div>
            </div>
        </div>
<!-- NÃ­vel de permissÃ£o -->
        <div class="form-group">
            <label for="permission_level">Nível de Permissão:</label>
            <select id="permission_level" name="permission_level" required>
                <option value="1">1 - Usuário</option>
            </select>
        </div>

        <input type="hidden" id="status" name="status" value="Ativo">

        <div class="form-actions">
            <button type="submit">Cadastrar</button>
            <button type="button" class="cancel-button" onclick="history.back()">Cancelar</button>
        </div>

    </form>
    <p>Já tem uma conta? <a href="/login">Faça login</a></p>
</div>

<script>
(function(){
  var email = document.getElementById('email');
  var emailError = document.getElementById('emailError');

  if(email){
    function validate(){
      if(email.validity.valid){
        email.classList.remove('is-invalid');
        email.classList.add('is-valid');
        if(emailError) emailError.style.display = 'none';
      } else {
        email.classList.remove('is-valid');
        email.classList.add('is-invalid');
        if(emailError) emailError.style.display = 'block';
      }
    }

    email.addEventListener('input', validate);
    email.addEventListener('blur', validate);

    var form = email.closest('form');
    if(form){
      form.addEventListener('submit', function(e){
        if(!email.checkValidity()){
          validate();
          e.preventDefault();
          email.focus();
        }
      });
    }
  }

  })();
</script>
